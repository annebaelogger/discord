<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fakecord</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .reaction {
      cursor: pointer;
      transition: transform 0.2s;
    }
    .reaction:hover {
      transform: scale(1.25);
    }
    /* Modal backdrop styling */
    .modal-bg { 
      background: rgba(0, 0, 0, 0.6);
    }
  </style>
</head>
<body class="bg-gray-900 text-white h-screen overflow-hidden">
  <!-- Main Container -->
  <div class="flex h-full">

    <!-- Sidebar (Servers) -->
    <div class="bg-gray-800 w-16 flex flex-col items-center py-4 space-y-4">
      <button onclick="switchServer('anne')" class="bg-pink-500 w-12 h-12 rounded-full text-white font-bold">A</button>
      <button onclick="switchServer('clyde')" class="bg-blue-500 w-12 h-12 rounded-full text-white font-bold">C</button>
      <button onclick="switchServer('dollie')" class="bg-purple-500 w-12 h-12 rounded-full text-white font-bold">D</button>
      <button class="bg-gray-700 w-12 h-12 rounded-full text-xl flex items-center justify-center">+</button>
    </div>

    <!-- Main Panel -->
    <div class="flex flex-col flex-1">
      <!-- Top Bar with Tabs -->
      <div class="bg-gray-700 flex items-center justify-between p-4">
        <div class="flex space-x-4">
          <button onclick="showTab('chat')" id="chatTabBtn" class="px-3 py-1 rounded bg-blue-500">Chat</button>
          <button onclick="showTab('friends')" id="friendsTabBtn" class="px-3 py-1 rounded bg-gray-600 hover:bg-gray-500">Friends</button>
        </div>
        <div class="flex items-center gap-2">
          <button onclick="toggleTheme()" class="px-3 py-1 rounded bg-gray-600 hover:bg-gray-500">Toggle Theme</button>
          <button onclick="openSettings()" class="px-3 py-1 rounded bg-green-500 hover:bg-green-400">Settings</button>
        </div>
      </div>

      <!-- Content Area -->
      <div class="flex-1 relative overflow-hidden">
        <!-- Chat Tab -->
        <div id="chatView" class="absolute inset-0 flex flex-col">
          <!-- Chat Header -->
          <div class="bg-gray-800 p-4 flex items-center gap-3">
            <img id="currentChatAvatar" src="default-avatar.png" alt="Chat Avatar" class="w-10 h-10 rounded-full cursor-pointer" onclick="showProfile(currentChat, 'bot')">
            <h2 id="channelTitle" class="text-xl font-bold">DM - Anne</h2>
          </div>
          <!-- Chat Messages -->
          <div id="chatBox" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-900"></div>
          <!-- Message Input -->
          <div class="p-4 bg-gray-800 flex gap-2 items-center">
            <input type="file" id="fileInput" class="hidden" />
            <button onclick="document.getElementById('fileInput').click()" class="text-white">üìé</button>
            <input id="messageInput" type="text" placeholder="Message..." class="flex-1 p-2 rounded bg-gray-700 text-white outline-none" />
            <button onclick="sendMessage()" class="bg-blue-500 px-4 py-1 rounded hover:bg-blue-400">Send</button>
          </div>
        </div>

        <!-- Friends Tab -->
        <div id="friendsView" class="absolute inset-0 hidden flex-col">
          <div class="bg-gray-800 p-4">
            <h2 class="text-xl font-bold">Friends</h2>
          </div>
          <div id="friendsList" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-900">
            <!-- Friend items will be injected here -->
          </div>
          <div class="p-4 bg-gray-800">
            <input id="addFriendInput" type="text" placeholder="Add friend by username" class="w-full p-2 rounded bg-gray-700 text-white outline-none" />
            <button onclick="addFriend()" class="mt-2 w-full bg-green-500 p-2 rounded hover:bg-green-400">Send Friend Request</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Profile Modal -->
  <div id="profileModal" class="fixed inset-0 hidden modal-bg flex items-center justify-center z-50" onclick="closeModal('profileModal')">
    <div class="bg-gray-800 p-6 rounded w-80" onclick="event.stopPropagation()">
      <img id="modalBanner" src="default-banner.png" alt="Banner" class="w-full h-32 object-cover rounded">
      <div class="flex items-center gap-3 mt-4">
        <img id="modalAvatar" src="default-avatar.png" alt="Avatar" class="w-16 h-16 rounded-full border-2 border-white cursor-pointer">
        <div>
          <h3 id="modalName" class="text-xl font-bold"></h3>
          <p id="modalBio" class="text-sm text-gray-400"></p>
        </div>
      </div>
      <button class="mt-4 bg-green-500 w-full py-2 rounded hover:bg-green-400">Send Friend Request</button>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="fixed inset-0 hidden modal-bg flex items-center justify-center z-50" onclick="closeModal('settingsModal')">
    <div class="bg-white text-black p-6 rounded w-96" onclick="event.stopPropagation()">
      <h2 class="text-lg font-bold mb-4">Edit My Profile</h2>
      <input id="settingAvatar" type="text" placeholder="Avatar URL" class="w-full border p-2 rounded mb-2" />
      <input id="settingBanner" type="text" placeholder="Banner URL" class="w-full border p-2 rounded mb-2" />
      <input id="settingUsername" type="text" placeholder="Username" class="w-full border p-2 rounded mb-2" />
      <textarea id="settingBio" placeholder="Bio..." class="w-full border p-2 rounded mb-4"></textarea>
      <button onclick="saveSettings()" class="bg-blue-500 text-white w-full py-2 rounded hover:bg-blue-400">Save</button>
    </div>
  </div>

  <script>
    // Global Profiles:
    let myProfile = {
      name: "Myself",
      avatar: "default-avatar.png",
      banner: "default-banner.png",
      bio: "This is my bio."
    };

    const bots = {
      anne: {
        name: "Anne",
        avatar: "default-avatar.png",
        banner: "default-banner.png",
        bio: "Your kawaii bunny bot üíñ. Ask me anything!"
      },
      clyde: {
        name: "Clyde",
        avatar: "default-avatar.png",
        banner: "default-banner.png",
        bio: "I'm silent but deadly ü§ñ."
      },
      dollie: {
        name: "Dollie",
        avatar: "default-avatar.png",
        banner: "default-banner.png",
        bio: "Creepy cute and full of surprises üñ§."
      }
    };

    // Fake friends list starts with the bots
    let friends = { ...bots };

    // Current chat partner key ("anne", "clyde", "dollie") ‚Äì default to anne.
    let currentChat = "anne";

    // Currently active tab ("chat" or "friends")
    let activeTab = "chat";

    // Initialize app by loading chat view and friends list
    window.onload = function() {
      showTab("chat");
      loadChat();
      loadFriends();
    };

    // Switch between Chat and Friends tabs
    function showTab(tab) {
      activeTab = tab;
      document.getElementById("chatView").classList.toggle("hidden", tab !== "chat");
      document.getElementById("friendsView").classList.toggle("hidden", tab !== "friends");
      // Update tab button styling
      document.getElementById("chatTabBtn").classList.toggle("bg-blue-500", tab === "chat");
      document.getElementById("chatTabBtn").classList.toggle("bg-gray-600", tab !== "chat");
      document.getElementById("friendsTabBtn").classList.toggle("bg-blue-500", tab === "friends");
      document.getElementById("friendsTabBtn").classList.toggle("bg-gray-600", tab !== "friends");
    }

    // Switch server (chat partner) based on sidebar click
    function switchServer(userKey) {
      if (bots[userKey]) {
        currentChat = userKey;
        document.getElementById("channelTitle").textContent = "DM - " + bots[userKey].name;
        document.getElementById("currentChatAvatar").src = bots[userKey].avatar;
        loadChat();
      }
    }

    // Load initial chat message for the current chat partner
    function loadChat() {
      const chatBox = document.getElementById("chatBox");
      chatBox.innerHTML = ""; // clear messages
      const bot = bots[currentChat];
      const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
      chatBox.innerHTML += `
        <div class="flex items-start gap-3">
          <img src="${bot.avatar}" class="w-10 h-10 rounded-full cursor-pointer" onclick="showProfile('${currentChat}', 'bot')">
          <div>
            <div class="flex items-center gap-2">
              <span class="font-semibold">${bot.name}</span>
              <span class="text-xs text-gray-400">${time}</span>
            </div>
            <p>Hello! I'm ${bot.name}. Let's chat!</p>
            <div class="flex gap-2 mt-1">
              <span class="reaction" onclick="addReaction(this)">üëç</span>
              <span class="reaction" onclick="addReaction(this)">‚ù§Ô∏è</span>
              <span class="reaction" onclick="addReaction(this)">üòÇ</span>
            </div>
          </div>
        </div>`;
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Send message (with optional file attachment)
    function sendMessage() {
      const messageInput = document.getElementById("messageInput");
      const fileInput = document.getElementById("fileInput");
      const chatBox = document.getElementById("chatBox");
      const message = messageInput.value.trim();
      const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
      if (!message && fileInput.files.length === 0) return;

      let msgHTML = `
        <div class="flex items-start gap-3">
          <img src="${myProfile.avatar}" class="w-10 h-10 rounded-full cursor-pointer" onclick="showProfile('self', 'self')">
          <div>
            <div class="flex items-center gap-2">
              <span class="font-semibold">${myProfile.name}</span>
              <span class="text-xs text-gray-400">${time}</span>
            </div>
            <p>${message}</p>`;
      if (fileInput.files.length > 0) {
        const imgURL = URL.createObjectURL(fileInput.files[0]);
        msgHTML += `<img src="${imgURL}" class="mt-2 max-w-xs rounded" />`;
        fileInput.value = "";
      }
      msgHTML += `<div class="flex gap-2 mt-1">
                    <span class="reaction" onclick="addReaction(this)">üëç</span>
                    <span class="reaction" onclick="addReaction(this)">‚ù§Ô∏è</span>
                    <span class="reaction" onclick="addReaction(this)">üòÇ</span>
                  </div>
          </div>
        </div>`;
      chatBox.innerHTML += msgHTML;
      messageInput.value = "";
      chatBox.scrollTop = chatBox.scrollHeight;

      // Bot reply after a short delay
      setTimeout(() => {
        const botReply = getBotReply(message);
        const replyHTML = `
          <div class="flex items-start gap-3">
            <img src="${bots[currentChat].avatar}" class="w-10 h-10 rounded-full cursor-pointer" onclick="showProfile('${currentChat}', 'bot')">
            <div>
              <div class="flex items-center gap-2">
                <span class="font-semibold">${bots[currentChat].name}</span>
                <span class="text-xs text-gray-400">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
              </div>
              <p>${botReply}</p>
              <div class="flex gap-2 mt-1">
                <span class="reaction" onclick="addReaction(this)">üëç</span>
                <span class="reaction" onclick="addReaction(this)">‚ù§Ô∏è</span>
                <span class="reaction" onclick="addReaction(this)">üòÇ</span>
              </div>
            </div>
          </div>`;
        chatBox.innerHTML += replyHTML;
        chatBox.scrollTop = chatBox.scrollHeight;
      }, 1000);
    }

    // Generate a bot reply based on user message content
    function getBotReply(userMessage) {
      const lower = userMessage.toLowerCase();
      if (lower.includes("hello")) return "Hiii~ üíï";
      if (lower.includes("help")) return "I'm here to chat and make you smile!";
      if (lower.includes("how are you")) return "I'm just a bot, but I'm doing great!";
      if (lower.includes("bye")) return "See you later~ ‚ú®";
      return "Hehe, tell me more~";
    }

    // Add reaction effect (simple animation)
    function addReaction(el) {
      el.classList.add("scale-125");
      setTimeout(() => el.classList.remove("scale-125"), 200);
    }

    // Toggle light/dark mode by toggling a class on the body element
    function toggleTheme() {
      document.body.classList.toggle("bg-gray-900");
      document.body.classList.toggle("bg-white");
      document.body.classList.toggle("text-white");
      document.body.classList.toggle("text-black");
    }

    // Load Friends list (from bots and any added friends)
    function loadFriends() {
      const friendsList = document.getElementById("friendsList");
      friendsList.innerHTML = "";
      // List my own profile at the top
      friendsList.innerHTML += `
        <div class="flex items-center gap-3 p-2 bg-gray-700 rounded cursor-pointer" onclick="showProfile('self','self')">
          <img src="${myProfile.avatar}" class="w-10 h-10 rounded-full">
          <span class="font-semibold">${myProfile.name}</span>
        </div>`;
      // List all friends (bots and added ones)
      for (let key in friends) {
        let friend = friends[key];
        friendsList.innerHTML += `
          <div class="flex items-center gap-3 p-2 bg-gray-700 rounded cursor-pointer" onclick="showProfile('${key}','bot')">
            <img src="${friend.avatar}" class="w-10 h-10 rounded-full">
            <span class="font-semibold">${friend.name}</span>
          </div>`;
      }
    }

    // Add friend via the input field (for demo, just adds to friends list)
    function addFriend() {
      const friendInput = document.getElementById("addFriendInput");
      const name = friendInput.value.trim();
      if (!name) return;
      // For demo, add friend with default images and a basic bio.
      friends[name.toLowerCase()] = {
        name: name,
        avatar: "default-avatar.png",
        banner: "default-banner.png",
        bio: "New friend: " + name
      };
      friendInput.value = "";
      loadFriends();
      alert("Friend request sent to " + name + " (fake request)!");
    }

    // Show Profile modal for either self or a bot/friend.
    // type: "self" for myProfile, "bot" for others.
    function showProfile(key, type) {
      let profile;
      if (type === "self") {
        profile = myProfile;
      } else {
        profile = bots[key] || friends[key];
      }
      document.getElementById("modalBanner").src = profile.banner;
      document.getElementById("modalAvatar").src = profile.avatar;
      document.getElementById("modalName").textContent = profile.name;
      document.getElementById("modalBio").textContent = profile.bio;
      document.getElementById("profileModal").classList.remove("hidden");
    }

    // Close modal (for both profile and settings) when clicking outside the content area.
    function closeModal(modalId) {
      document.getElementById(modalId).classList.add("hidden");
    }

    // Open Settings modal to edit my profile.
    function openSettings() {
      // Pre-fill current values
      document.getElementById("settingAvatar").value = myProfile.avatar;
      document.getElementById("settingBanner").value = myProfile.banner;
      document.getElementById("settingUsername").value = myProfile.name;
      document.getElementById("settingBio").value = myProfile.bio;
      document.getElementById("settingsModal").classList.remove("hidden");
    }

    // Save settings from the Settings modal and update my profile.
    function saveSettings() {
      const avatar = document.getElementById("settingAvatar").value.trim();
      const banner = document.getElementById("settingBanner").value.trim();
      const username = document.getElementById("settingUsername").value.trim();
      const bio = document.getElementById("settingBio").value.trim();
      if (username) myProfile.name = username;
      if (avatar) myProfile.avatar = avatar;
      if (banner) myProfile.banner = banner;
      if (bio) myProfile.bio = bio;
      document.getElementById("settingsModal").classList.add("hidden");
      loadFriends();
      // If currently chatting with self, update chat header avatar/name.
      if (currentChat === "self") {
        document.getElementById("currentChatAvatar").src = myProfile.avatar;
        document.getElementById("channelTitle").textContent = "DM - " + myProfile.name;
      }
    }
  </script>
</body>
</html>
